{"ast":null,"code":"var _jsxFileName = \"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/src/components/Login.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Alert, Button, Card, CardBody, Input, Form, FormGroup, Label } from \"reactstrap\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { routeToDashboard } from \"../actions\";\n\nconst Login = () => {\n  const [creds, setCreds] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const {\n    login,\n    currentUser\n  } = useAuth();\n  const userInfo = useSelector(state => state.routeToDashboardReducer.user);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  useEffect(() => {\n    if (userInfo) {\n      return userInfo.userType === \"employee\" ? history.push(\"/e_dashboard\") : history.push(\"/c_dashboard\");\n    }\n  }, [history, userInfo]);\n\n  const handleChange = e => {\n    setCreds({ ...creds,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      setError(\"\");\n      setLoading(true);\n      await login(creds.email, creds.password);\n    } catch {\n      setError(\"Failed to sign in\");\n    }\n\n    dispatch(routeToDashboard(currentUser.uid));\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, \"Log In\"), error && /*#__PURE__*/React.createElement(Alert, {\n    color: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, error), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"email\",\n    name: \"email\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    name: \"password\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"Log In\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"Forgot Password?\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/src/components/Login.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","useHistory","Alert","Button","Card","CardBody","Input","Form","FormGroup","Label","useAuth","routeToDashboard","Login","creds","setCreds","email","password","error","setError","loading","setLoading","login","currentUser","userInfo","state","routeToDashboardReducer","user","dispatch","history","userType","push","handleChange","e","target","name","value","handleSubmit","preventDefault","uid"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,SACEC,KADF,EAEEC,MAFF,EAGEC,IAHF,EAIEC,QAJF,EAKEC,KALF,EAMEC,IANF,EAOEC,SAPF,EAQEC,KARF,QASO,YATP;AAWA,SAASC,OAAT,QAAwB,yBAAxB;AACA,SAASC,gBAAT,QAAiC,YAAjC;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAClB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC;AACjCkB,IAAAA,KAAK,EAAE,EAD0B;AAEjCC,IAAAA,QAAQ,EAAE;AAFuB,GAAD,CAAlC;AAIA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACsB,OAAD,EAAUC,UAAV,IAAwBvB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAEwB,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAyBZ,OAAO,EAAtC;AACA,QAAMa,QAAQ,GAAGxB,WAAW,CAAEyB,KAAD,IAAWA,KAAK,CAACC,uBAAN,CAA8BC,IAA1C,CAA5B;AACA,QAAMC,QAAQ,GAAG7B,WAAW,EAA5B;AACA,QAAM8B,OAAO,GAAG3B,UAAU,EAA1B;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI2B,QAAJ,EAAc;AACZ,aAAOA,QAAQ,CAACM,QAAT,KAAsB,UAAtB,GACHD,OAAO,CAACE,IAAR,CAAa,cAAb,CADG,GAEHF,OAAO,CAACE,IAAR,CAAa,cAAb,CAFJ;AAGD;AACF,GANQ,EAMN,CAACF,OAAD,EAAUL,QAAV,CANM,CAAT;;AAQA,QAAMQ,YAAY,GAAIC,CAAD,IAAO;AAC1BlB,IAAAA,QAAQ,CAAC,EACP,GAAGD,KADI;AAEP,OAACmB,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAFnB,KAAD,CAAR;AAID,GALD;;AAOA,QAAMC,YAAY,GAAG,MAAOJ,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACK,cAAF;;AAEA,QAAI;AACFnB,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,YAAMC,KAAK,CAACR,KAAK,CAACE,KAAP,EAAcF,KAAK,CAACG,QAApB,CAAX;AACD,KAJD,CAIE,MAAM;AACNE,MAAAA,QAAQ,CAAC,mBAAD,CAAR;AACD;;AAEDS,IAAAA,QAAQ,CAAChB,gBAAgB,CAACW,WAAW,CAACgB,GAAb,CAAjB,CAAR;AACAlB,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAbD;;AAeA,sBACE,uDACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEGH,KAAK,iBAAI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuBA,KAAvB,CAFZ,eAGE,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEmB,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,GAAG,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,IAAI,EAAC,OAAzB;AAAiC,IAAA,QAAQ,EAAEL,YAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,eAKE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,IAAI,EAAC,UAA5B;AAAuC,IAAA,QAAQ,EAAEA,YAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CALF,eASE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAEZ,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATF,CAHF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAhBF,CADF,CADF,CADF;AA0BD,CApED;;AAsEA,eAAeP,KAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  Alert,\n  Button,\n  Card,\n  CardBody,\n  Input,\n  Form,\n  FormGroup,\n  Label,\n} from \"reactstrap\";\n\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { routeToDashboard } from \"../actions\";\n\nconst Login = () => {\n  const [creds, setCreds] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const { login, currentUser } = useAuth();\n  const userInfo = useSelector((state) => state.routeToDashboardReducer.user);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (userInfo) {\n      return userInfo.userType === \"employee\"\n        ? history.push(\"/e_dashboard\")\n        : history.push(\"/c_dashboard\");\n    }\n  }, [history, userInfo]);\n\n  const handleChange = (e) => {\n    setCreds({\n      ...creds,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      setError(\"\");\n      setLoading(true);\n      await login(creds.email, creds.password);\n    } catch {\n      setError(\"Failed to sign in\");\n    }\n\n    dispatch(routeToDashboard(currentUser.uid));\n    setLoading(false);\n  };\n\n  return (\n    <>\n      <Card>\n        <CardBody>\n          <h2>Log In</h2>\n          {error && <Alert color=\"danger\">{error}</Alert>}\n          <Form onSubmit={handleSubmit}>\n            <FormGroup>\n              <Label for=\"email\">Email</Label>\n              <Input type=\"email\" name=\"email\" onChange={handleChange} />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"password\">Password</Label>\n              <Input type=\"password\" name=\"password\" onChange={handleChange} />\n            </FormGroup>\n            <Button type=\"submit\" disabled={loading}>\n              Log In\n            </Button>\n          </Form>\n          <div>\n            <Link to=\"\">Forgot Password?</Link>\n          </div>\n        </CardBody>\n      </Card>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}