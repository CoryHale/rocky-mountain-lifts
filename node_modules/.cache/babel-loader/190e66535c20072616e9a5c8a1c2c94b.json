{"ast":null,"code":"var _jsxFileName = \"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/src/components/customer-page-components/NoteTab.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport { Card, Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input } from \"reactstrap\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { addNote } from \"../../actions/addNote\";\nimport { getCustomerNotes } from \"../../actions/getCustomerNotes\";\n\nconst NoteTab = () => {\n  const [notes, setNotes] = useState([]);\n  const getNotesFromState = useSelector(state => state.getCustomerNotesReducer.notes);\n  const [isOpen, setIsOpen] = useState(false);\n  const [note, setNote] = useState({\n    note: \"\",\n    createdBy: \"\",\n    createdOnDate: \"\",\n    createdAtTime: \"\",\n    customerId: \"\"\n  });\n  const success = useSelector(state => state.addNoteReducer.success);\n  const {\n    currentUser\n  } = useAuth();\n  const [flag, setFlag] = useState(false);\n  const [employees, setEmployees] = useState();\n  const fetchUsers = useSelector(state => state.getUsersReducer.users);\n  const dispatch = useDispatch();\n  const location = useLocation();\n  useEffect(() => {\n    const pathArray = location.pathname.split(\"/\");\n    const customerId = pathArray[pathArray.length - 1];\n    setNote({ ...note,\n      customerId: customerId\n    });\n    dispatch(getCustomerNotes(customerId));\n  }, []);\n  useEffect(() => {\n    if (getNotesFromState) {\n      setNotes(getNotesFromState);\n    }\n  }, [getNotesFromState]);\n  useEffect(() => {\n    if (flag) {\n      dispatch(addNote(note));\n    }\n  }, [flag]);\n  useEffect(() => {\n    if (success) {\n      toggle();\n    }\n  }, [success]);\n  useEffect(() => {\n    const array = [];\n\n    if (fetchUsers.users) {\n      fetchUsers.users.forEach(user => {\n        if (user.userType === \"employee\" && user.active === true) {\n          array.push(user);\n        }\n      });\n    }\n\n    setEmployees(array);\n  }, [fetchUsers]);\n\n  const toggle = () => {\n    if (isOpen) {\n      setNote({\n        note: \"\",\n        createdOnDate: \"\",\n        createdAtTime: \"\",\n        createdBy: \"\"\n      });\n    }\n\n    setIsOpen(!isOpen);\n  };\n\n  const employeeFinder = createdBy => {\n    var name;\n    employees.forEach(employee => {\n      if (employee.userId === createdBy) {\n        name = `${employee.firstName} ${employee.lastName}`;\n      }\n    });\n    return name;\n  };\n\n  const handleChange = e => {\n    setNote({ ...note,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setNote({ ...note,\n      createdOnDate: new Date().toLocaleDateString(),\n      createdAtTime: new Date().toLocaleTimeString(),\n      createdBy: currentUser.uid\n    });\n    setFlag(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"customer-page-note-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, notes ? notes.notes ? notes.notes.map(note => /*#__PURE__*/React.createElement(Card, {\n    className: \"note-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, note.note), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \"Created By: \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 33\n    }\n  }, employeeFinder(note.createdBy))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, \"Created: \", note.createdOnDate, \" @ \", note.createdAtTime), \" \"))) : null : null, /*#__PURE__*/React.createElement(Button, {\n    outline: true,\n    color: \"success\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, \"Add Note\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isOpen,\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, \"Add Note\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"note\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, \"Note\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    name: \"note\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"Submit\"))));\n};\n\nexport default NoteTab;","map":{"version":3,"sources":["/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/src/components/customer-page-components/NoteTab.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useLocation","Card","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","useAuth","addNote","getCustomerNotes","NoteTab","notes","setNotes","getNotesFromState","state","getCustomerNotesReducer","isOpen","setIsOpen","note","setNote","createdBy","createdOnDate","createdAtTime","customerId","success","addNoteReducer","currentUser","flag","setFlag","employees","setEmployees","fetchUsers","getUsersReducer","users","dispatch","location","pathArray","pathname","split","length","toggle","array","forEach","user","userType","active","push","employeeFinder","name","employee","userId","firstName","lastName","handleChange","e","target","value","handleSubmit","preventDefault","Date","toLocaleDateString","toLocaleTimeString","uid","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport {\n  Card,\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n} from \"reactstrap\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { addNote } from \"../../actions/addNote\";\nimport { getCustomerNotes } from \"../../actions/getCustomerNotes\";\n\nconst NoteTab = () => {\n  const [notes, setNotes] = useState([]);\n  const getNotesFromState = useSelector(\n    (state) => state.getCustomerNotesReducer.notes\n  );\n  const [isOpen, setIsOpen] = useState(false);\n  const [note, setNote] = useState({\n    note: \"\",\n    createdBy: \"\",\n    createdOnDate: \"\",\n    createdAtTime: \"\",\n    customerId: \"\",\n  });\n  const success = useSelector((state) => state.addNoteReducer.success);\n  const { currentUser } = useAuth();\n  const [flag, setFlag] = useState(false);\n  const [employees, setEmployees] = useState();\n  const fetchUsers = useSelector((state) => state.getUsersReducer.users);\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  useEffect(() => {\n    const pathArray = location.pathname.split(\"/\");\n    const customerId = pathArray[pathArray.length - 1];\n    setNote({\n      ...note,\n      customerId: customerId,\n    });\n    dispatch(getCustomerNotes(customerId));\n  }, []);\n\n  useEffect(() => {\n    if (getNotesFromState) {\n      setNotes(getNotesFromState);\n    }\n  }, [getNotesFromState]);\n\n  useEffect(() => {\n    if (flag) {\n      dispatch(addNote(note));\n    }\n  }, [flag]);\n\n  useEffect(() => {\n    if (success) {\n      toggle();\n    }\n  }, [success]);\n\n  useEffect(() => {\n    const array = [];\n\n    if (fetchUsers.users) {\n      fetchUsers.users.forEach((user) => {\n        if (user.userType === \"employee\" && user.active === true) {\n          array.push(user);\n        }\n      });\n    }\n    setEmployees(array);\n  }, [fetchUsers]);\n\n  const toggle = () => {\n    if (isOpen) {\n      setNote({\n        note: \"\",\n        createdOnDate: \"\",\n        createdAtTime: \"\",\n        createdBy: \"\",\n      });\n    }\n    setIsOpen(!isOpen);\n  };\n\n  const employeeFinder = (createdBy) => {\n    var name;\n\n    employees.forEach((employee) => {\n      if (employee.userId === createdBy) {\n        name = `${employee.firstName} ${employee.lastName}`\n      }\n    });\n    return name;\n  };\n\n  const handleChange = (e) => {\n    setNote({\n      ...note,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setNote({\n      ...note,\n      createdOnDate: new Date().toLocaleDateString(),\n      createdAtTime: new Date().toLocaleTimeString(),\n      createdBy: currentUser.uid,\n    });\n    setFlag(true);\n  };\n\n  return (\n    <div className=\"customer-page-note-tab\">\n      {notes\n        ? notes.notes\n          ? notes.notes.map((note) => (\n              <Card className=\"note-card\">\n                <p>{note.note}</p>\n                <div>\n                  <p>\n                    Created By: <span>{employeeFinder(note.createdBy)}</span>\n                  </p>\n                  <p>\n                    Created: {note.createdOnDate} @ {note.createdAtTime}\n                  </p>{\" \"}\n                  {/* Fix time format */}\n                </div>\n              </Card>\n            ))\n          : null\n        : null}\n      <Button outline color=\"success\" onClick={toggle}>\n        Add Note\n      </Button>\n      <Modal isOpen={isOpen} toggle={toggle}>\n        <ModalHeader toggle={toggle}>Add Note</ModalHeader>\n        <ModalBody>\n          <Form onSubmit={handleSubmit}>\n            <FormGroup>\n              <Label for=\"note\">Note</Label>\n              <Input type=\"textarea\" name=\"note\" onChange={handleChange} />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"success\" onClick={handleSubmit}>\n            Submit\n          </Button>\n        </ModalFooter>\n      </Modal>\n    </div>\n  );\n};\n\nexport default NoteTab;\n"]},"metadata":{},"sourceType":"module"}