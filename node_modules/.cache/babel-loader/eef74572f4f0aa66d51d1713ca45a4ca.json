{"ast":null,"code":"import _toConsumableArray from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useLocation}from\"react-router-dom\";import{Table,Button,Modal,ModalHeader,ModalBody,ModalFooter,Form,FormGroup,Label,Input,FormFeedback}from\"reactstrap\";import{getCustomer}from\"../../actions/getCustomer\";import{addEmployeeToCustomer}from\"../../actions/addEmployeeToCustomer\";import\"../../styles/customer.scss\";var EmployeeTab=function EmployeeTab(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),customer=_useState2[0],setCustomer=_useState2[1];var getCustomerFromState=useSelector(function(state){return state.getCustomerReducer.customer;});var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState({firstName:\"\",lastName:\"\",jobTitle:\"\",officeNumber:\"\",officeExt:\"\",cellNumber:\"\",email:\"\"}),_useState6=_slicedToArray(_useState5,2),employee=_useState6[0],setEmployee=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),flag=_useState10[0],setFlag=_useState10[1];var dispatch=useDispatch();var location=useLocation();useEffect(function(){var pathArray=location.pathname.split(\"/\");var customerId=pathArray[pathArray.length-1];dispatch(getCustomer(customerId));},[]);useEffect(function(){if(getCustomerFromState){setCustomer(getCustomerFromState);}},[getCustomerFromState]);useEffect(function(){if(flag){setFlag(false);dispatch(addEmployeeToCustomer(customer));toggle();}},[flag]);var toggle=function toggle(){if(isOpen){setEmployee({firstName:\"\",lastName:\"\",jobTitle:\"\",officeNumber:\"\",officeExt:\"\",cellNumber:\"\",email:\"\"});setErrors({});}setIsOpen(!isOpen);};var handleChange=function handleChange(e){setEmployee(_objectSpread(_objectSpread({},employee),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var errorsObject={};if(employee.firstName===\"\"){errorsObject.firstName=\"Must not be empty\";}if(employee.lastName===\"\"){errorsObject.lastName=\"Must not be empty\";}if(employee.jobTitle===\"\"){errorsObject.jobTitle=\"Must not be empty\";}if(employee.officeNumber===\"\"&&employee.cellNumber===\"\"){errorsObject.officeNumber=\"Must not be empty\";errorsObject.cellNumber=\"Must not be empty\";}else if(employee.officeNumber!==\"\"&&!employee.officeNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)){errorsObject.officeNumber=\"Must be a valid phone number\";}else if(employee.cellNumber!==\"\"&&!employee.cellNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)){errorsObject.cellNumber=\"Must be a valid phone number\";}if(employee.email===\"\"){errorsObject.email=\"Must not be empty\";}else if(!employee.email.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)){errorsObject.email=\"Must be a valid email address\";}setErrors(errorsObject);if(Object.keys(errorsObject).length===0){if(customer.employees.length===0){setFlag(true);setCustomer(_objectSpread(_objectSpread({},customer),{},{employees:[employee]}));}else{setFlag(true);setCustomer(_objectSpread(_objectSpread({},customer),{},{employees:[].concat(_toConsumableArray(customer.employees),[employee])}));}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"employees-tab\"},/*#__PURE__*/React.createElement(Table,{size:\"sm\",hover:true,className:\"customer-page-employees-table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Job Title\"),/*#__PURE__*/React.createElement(\"th\",null,\"Office Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Cell Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,customer.primaryContact?customer.primaryContact.firstName:null,\" \",customer.primaryContact?customer.primaryContact.lastName:null),/*#__PURE__*/React.createElement(\"td\",null,customer.primaryJobTitle),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:customer.primaryExt?\"tel:+1-\".concat(customer.primaryOfficeNumber,\",\").concat(customer.primaryExt):\"tel:+1-\".concat(customer.primaryOfficeNumber)},customer.primaryExt?\"\".concat(customer.primaryOfficeNumber,\" ext. \").concat(customer.primaryExt):\"\".concat(customer.primaryOfficeNumber))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(customer.primaryCellNumber)},customer.primaryCellNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(customer.primaryEmail)},customer.primaryEmail))),customer.billingJobTitle!==\"\"?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,customer.billingContact?customer.billingContact.firstName:null,\" \",customer.billingContact?customer.billingContact.lastName:null),/*#__PURE__*/React.createElement(\"td\",null,customer.billingJobTitle),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:customer.billingExt?\"tel:+1-\".concat(customer.billingOfficeNumber,\",\").concat(customer.billingExt):\"tel:+1-\".concat(customer.billingOfficeNumber)},customer.billingExt?\"\".concat(customer.billingOfficeNumber,\" ext. \").concat(customer.billingExt):\"\".concat(customer.billingOfficeNumber))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(customer.billingCellNumber)},customer.billingCellNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(customer.billingEmail)},customer.billingEmail))):null,customer.employees?customer.employees.map(function(employee){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,employee.firstName,\" \",employee.lastName),/*#__PURE__*/React.createElement(\"td\",null,employee.jobTitle),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:employee.officeExt?\"tel:+1-\".concat(employee.officeNumber,\",\").concat(employee.officeExt):\"tel:+1-\".concat(employee.officeNumber)},employee.officeExt?\"\".concat(employee.officeNumber,\" ext. \").concat(employee.officeExt):\"\".concat(employee.officeNumber))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(employee.cellNumber)},employee.cellNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(employee.email)},employee.email)));}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"add-employee-div\"},/*#__PURE__*/React.createElement(Button,{outline:true,color:\"success\",onClick:toggle},\"Add Employee\")),/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,toggle:toggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggle},\"Add Employee\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"add-employee-name-div\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeFirstName\"},\"First Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"firstName\",onChange:handleChange,invalid:errors.firstName?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.firstName)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeLastName\"},\"Last Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"lastName\",onChange:handleChange,invalid:errors.lastName?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.lastName))),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeJobTitle\"},\"Job Title\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"jobTitle\",onChange:handleChange,invalid:errors.jobTitle?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.jobTitle)),/*#__PURE__*/React.createElement(\"div\",{className:\"employee-phone-div\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"employee-office-number\"},/*#__PURE__*/React.createElement(Label,{for:\"employeeOfficeNumber\"},\"Office Phone Number\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"officeNumber\",placeholder:\"XXX-XXX-XXXX\",onChange:handleChange,invalid:errors.officeNumber?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.officeNumber)),/*#__PURE__*/React.createElement(FormGroup,{className:\"employee-office-ext\"},/*#__PURE__*/React.createElement(Label,{for:\"employeeOfficeExt\"},\"ext.\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"officeExt\",onChange:handleChange}))),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeCellNumber\"},\"Cell Phone Number\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"cellNumber\",placeholder:\"XXX-XXX-XXXX\",onChange:handleChange,invalid:errors.cellNumber?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.cellNumber)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeEmail\"},\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"email\",placeholder:\"example@example.com\",onChange:handleChange,invalid:errors.email?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.email)))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"success\",onClick:handleSubmit},\"Submit\"))));};export default EmployeeTab;","map":{"version":3,"sources":["/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/src/components/customer-page-components/EmployeeTab.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useLocation","Table","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","FormFeedback","getCustomer","addEmployeeToCustomer","EmployeeTab","customer","setCustomer","getCustomerFromState","state","getCustomerReducer","isOpen","setIsOpen","firstName","lastName","jobTitle","officeNumber","officeExt","cellNumber","email","employee","setEmployee","errors","setErrors","flag","setFlag","dispatch","location","pathArray","pathname","split","customerId","length","toggle","handleChange","e","target","name","value","handleSubmit","preventDefault","errorsObject","match","Object","keys","employees","primaryContact","primaryJobTitle","primaryExt","primaryOfficeNumber","primaryCellNumber","primaryEmail","billingJobTitle","billingContact","billingExt","billingOfficeNumber","billingCellNumber","billingEmail","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport {\n  Table,\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  FormFeedback,\n} from \"reactstrap\";\nimport { getCustomer } from \"../../actions/getCustomer\";\nimport { addEmployeeToCustomer } from \"../../actions/addEmployeeToCustomer\";\n\nimport \"../../styles/customer.scss\";\n\nconst EmployeeTab = () => {\n  const [customer, setCustomer] = useState({});\n  const getCustomerFromState = useSelector(\n    (state) => state.getCustomerReducer.customer\n  );\n  const [isOpen, setIsOpen] = useState(false);\n  const [employee, setEmployee] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    jobTitle: \"\",\n    officeNumber: \"\",\n    officeExt: \"\",\n    cellNumber: \"\",\n    email: \"\",\n  });\n  const [errors, setErrors] = useState({});\n  const [flag, setFlag] = useState(false);\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  useEffect(() => {\n    const pathArray = location.pathname.split(\"/\");\n    const customerId = pathArray[pathArray.length - 1];\n    dispatch(getCustomer(customerId));\n  }, []);\n\n  useEffect(() => {\n    if (getCustomerFromState) {\n      setCustomer(getCustomerFromState);\n    }\n  }, [getCustomerFromState]);\n\n  useEffect(() => {\n    if (flag) {\n      setFlag(false);\n      dispatch(addEmployeeToCustomer(customer));\n      toggle();\n    }\n  }, [flag]);\n\n  const toggle = () => {\n    if (isOpen) {\n      setEmployee({\n        firstName: \"\",\n        lastName: \"\",\n        jobTitle: \"\",\n        officeNumber: \"\",\n        officeExt: \"\",\n        cellNumber: \"\",\n        email: \"\",\n      });\n      setErrors({});\n    }\n    setIsOpen(!isOpen);\n  };\n\n  const handleChange = (e) => {\n    setEmployee({\n      ...employee,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    let errorsObject = {};\n\n    if (employee.firstName === \"\") {\n      errorsObject.firstName = \"Must not be empty\";\n    }\n    if (employee.lastName === \"\") {\n      errorsObject.lastName = \"Must not be empty\";\n    }\n    if (employee.jobTitle === \"\") {\n      errorsObject.jobTitle = \"Must not be empty\";\n    }\n    if (employee.officeNumber === \"\" && employee.cellNumber === \"\") {\n      errorsObject.officeNumber = \"Must not be empty\";\n      errorsObject.cellNumber = \"Must not be empty\";\n    } else if (\n      employee.officeNumber !== \"\" &&\n      !employee.officeNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)\n    ) {\n      errorsObject.officeNumber = \"Must be a valid phone number\";\n    } else if (\n      employee.cellNumber !== \"\" &&\n      !employee.cellNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)\n    ) {\n      errorsObject.cellNumber = \"Must be a valid phone number\";\n    }\n    if (employee.email === \"\") {\n      errorsObject.email = \"Must not be empty\";\n    } else if (\n      !employee.email.match(\n        /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      )\n    ) {\n      errorsObject.email = \"Must be a valid email address\";\n    }\n\n    setErrors(errorsObject);\n\n    if (Object.keys(errorsObject).length === 0) {\n      if (customer.employees.length === 0) {\n        setFlag(true);\n        setCustomer({\n          ...customer,\n          employees: [employee],\n        });\n      } else {\n        setFlag(true);\n        setCustomer({\n          ...customer,\n          employees: [...customer.employees, employee],\n        });\n      }\n    }\n  };\n\n  return (\n    <div className=\"employees-tab\">\n      <Table size=\"sm\" hover className=\"customer-page-employees-table\">\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Job Title</th>\n            <th>Office Number</th>\n            <th>Cell Number</th>\n            <th>Email</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>\n              {customer.primaryContact\n                ? customer.primaryContact.firstName\n                : null}{\" \"}\n              {customer.primaryContact\n                ? customer.primaryContact.lastName\n                : null}\n            </td>\n            <td>{customer.primaryJobTitle}</td>\n            <td>\n              <a\n                href={\n                  customer.primaryExt\n                    ? `tel:+1-${customer.primaryOfficeNumber},${customer.primaryExt}`\n                    : `tel:+1-${customer.primaryOfficeNumber}`\n                }\n              >\n                {customer.primaryExt\n                  ? `${customer.primaryOfficeNumber} ext. ${customer.primaryExt}`\n                  : `${customer.primaryOfficeNumber}`}\n              </a>\n            </td>\n            <td>\n              <a href={`tel:+1-${customer.primaryCellNumber}`}>\n                {customer.primaryCellNumber}\n              </a>\n            </td>\n            <td>\n              <a href={`mailto:${customer.primaryEmail}`}>\n                {customer.primaryEmail}\n              </a>\n            </td>\n          </tr>\n          {customer.billingJobTitle !== \"\" ? (\n            <tr>\n              <td>\n                {customer.billingContact\n                  ? customer.billingContact.firstName\n                  : null}{\" \"}\n                {customer.billingContact\n                  ? customer.billingContact.lastName\n                  : null}\n              </td>\n              <td>{customer.billingJobTitle}</td>\n              <td>\n                <a\n                  href={\n                    customer.billingExt\n                      ? `tel:+1-${customer.billingOfficeNumber},${customer.billingExt}`\n                      : `tel:+1-${customer.billingOfficeNumber}`\n                  }\n                >\n                  {customer.billingExt\n                    ? `${customer.billingOfficeNumber} ext. ${customer.billingExt}`\n                    : `${customer.billingOfficeNumber}`}\n                </a>\n              </td>\n              <td>\n                <a href={`tel:+1-${customer.billingCellNumber}`}>\n                  {customer.billingCellNumber}\n                </a>\n              </td>\n              <td>\n                <a href={`mailto:${customer.billingEmail}`}>\n                  {customer.billingEmail}\n                </a>\n              </td>\n            </tr>\n          ) : null}\n          {customer.employees\n            ? customer.employees.map((employee) => (\n                <tr>\n                  <td>\n                    {employee.firstName} {employee.lastName}\n                  </td>\n                  <td>{employee.jobTitle}</td>\n                  <td>\n                    <a\n                      href={\n                        employee.officeExt\n                          ? `tel:+1-${employee.officeNumber},${employee.officeExt}`\n                          : `tel:+1-${employee.officeNumber}`\n                      }\n                    >\n                      {employee.officeExt\n                        ? `${employee.officeNumber} ext. ${employee.officeExt}`\n                        : `${employee.officeNumber}`}\n                    </a>\n                  </td>\n                  <td>\n                    <a href={`tel:+1-${employee.cellNumber}`}>\n                      {employee.cellNumber}\n                    </a>\n                  </td>\n                  <td>\n                    <a href={`mailto:${employee.email}`}>{employee.email}</a>\n                  </td>\n                </tr>\n              ))\n            : null}\n        </tbody>\n      </Table>\n      <div className=\"add-employee-div\">\n        <Button outline color=\"success\" onClick={toggle}>\n          Add Employee\n        </Button>\n      </div>\n      <Modal isOpen={isOpen} toggle={toggle}>\n        <ModalHeader toggle={toggle}>Add Employee</ModalHeader>\n        <ModalBody>\n          <Form onSubmit={handleSubmit}>\n            <div className=\"add-employee-name-div\">\n              <FormGroup>\n                <Label for=\"employeeFirstName\">First Name</Label>\n                <Input\n                  type=\"text\"\n                  name=\"firstName\"\n                  onChange={handleChange}\n                  invalid={errors.firstName ? true : false}\n                />\n                <FormFeedback>{errors.firstName}</FormFeedback>\n              </FormGroup>\n              <FormGroup>\n                <Label for=\"employeeLastName\">Last Name</Label>\n                <Input\n                  type=\"text\"\n                  name=\"lastName\"\n                  onChange={handleChange}\n                  invalid={errors.lastName ? true : false}\n                />\n                <FormFeedback>{errors.lastName}</FormFeedback>\n              </FormGroup>\n            </div>\n            <FormGroup>\n              <Label for=\"employeeJobTitle\">Job Title</Label>\n              <Input\n                type=\"text\"\n                name=\"jobTitle\"\n                onChange={handleChange}\n                invalid={errors.jobTitle ? true : false}\n              />\n              <FormFeedback>{errors.jobTitle}</FormFeedback>\n            </FormGroup>\n            <div className=\"employee-phone-div\">\n              <FormGroup className=\"employee-office-number\">\n                <Label for=\"employeeOfficeNumber\">Office Phone Number</Label>\n                <Input\n                  type=\"text\"\n                  name=\"officeNumber\"\n                  placeholder=\"XXX-XXX-XXXX\"\n                  onChange={handleChange}\n                  invalid={errors.officeNumber ? true : false}\n                />\n                <FormFeedback>{errors.officeNumber}</FormFeedback>\n              </FormGroup>\n              <FormGroup className=\"employee-office-ext\">\n                <Label for=\"employeeOfficeExt\">ext.</Label>\n                <Input type=\"text\" name=\"officeExt\" onChange={handleChange} />\n              </FormGroup>\n            </div>\n            <FormGroup>\n              <Label for=\"employeeCellNumber\">Cell Phone Number</Label>\n              <Input\n                type=\"text\"\n                name=\"cellNumber\"\n                placeholder=\"XXX-XXX-XXXX\"\n                onChange={handleChange}\n                invalid={errors.cellNumber ? true : false}\n              />\n              <FormFeedback>{errors.cellNumber}</FormFeedback>\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"employeeEmail\">Email</Label>\n              <Input\n                type=\"text\"\n                name=\"email\"\n                placeholder=\"example@example.com\"\n                onChange={handleChange}\n                invalid={errors.email ? true : false}\n              />\n              <FormFeedback>{errors.email}</FormFeedback>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"success\" onClick={handleSubmit}>\n            Submit\n          </Button>\n        </ModalFooter>\n      </Modal>\n    </div>\n  );\n};\n\nexport default EmployeeTab;\n"]},"metadata":{},"sourceType":"module"}