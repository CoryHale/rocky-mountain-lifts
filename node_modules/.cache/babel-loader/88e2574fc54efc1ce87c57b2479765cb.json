{"ast":null,"code":"import _defineProperty from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import{Form,Input,Button,Label}from'reactstrap';import{login}from'../../actions/login';import LoginNav from'./LoginNav';import Footer from'../Employees/Footer';import'bootstrap/dist/css/bootstrap.css';import'../../styles/login.scss';var Login=function Login(){var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),creds=_useState2[0],setCreds=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var userType=useSelector(function(state){return state.loginReducer.userType;});var loggingIn=useSelector(function(state){return state.loginReducer.loggingIn;});var success=useSelector(function(state){return state.loginReducer.success;});var failure=useSelector(function(state){return state.loginReducer.error;});var dispatch=useDispatch();var history=useHistory();var handleChange=function handleChange(e){setCreds(_objectSpread(_objectSpread({},creds),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(login(creds)).then(function(){if(!localStorage.getItem('token')){setError(true);console.log(error);};}).catch(function(err){return console.log(err);});};useEffect(function(){if(userType){return userType==='employee'?history.push('/e_dashboard'):history.push('/c_dashboard');};},[userType]);return/*#__PURE__*/React.createElement(\"div\",{className:\"body\"},/*#__PURE__*/React.createElement(LoginNav,{className:\"navbar\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"login-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Log In\"),/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit,className:\"form-field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field\"},/*#__PURE__*/React.createElement(Label,{className:\"input-label\",for:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(Input,{className:\"input\",type:\"text\",value:creds.email,id:\"email\",name:\"email\",onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field\"},/*#__PURE__*/React.createElement(Label,{className:\"input-label\",for:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(Input,{className:\"input\",type:\"password\",value:creds.password,name:\"password\",onChange:handleChange})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",size:\"lg\",outline:true,color:\"success\",className:\"btn-centered\"},\"Log In\"),loggingIn?/*#__PURE__*/React.createElement(\"p\",{className:\"login-status\"},\"...Logging In...\"):success?/*#__PURE__*/React.createElement(\"p\",{className:\"login-status success\"},\"Login Successful!\"):failure?/*#__PURE__*/React.createElement(\"p\",{className:\"login-status error\"},\"Login Failed\"):null))),/*#__PURE__*/React.createElement(Footer,null));};export default Login;","map":{"version":3,"sources":["/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/src/components/Login/Login.js"],"names":["React","useState","useEffect","useSelector","useDispatch","useHistory","Form","Input","Button","Label","login","LoginNav","Footer","Login","username","password","creds","setCreds","error","setError","userType","state","loginReducer","loggingIn","success","failure","dispatch","history","handleChange","e","target","name","value","handleSubmit","preventDefault","then","localStorage","getItem","console","log","catch","err","push","email"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Input, Button, Label } from 'reactstrap';\nimport { login } from '../../actions/login';\nimport LoginNav from './LoginNav';\nimport Footer from '../Employees/Footer';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '../../styles/login.scss';\n\nconst Login = () => {\n    const [creds, setCreds] = useState({username: '', password: ''});\n    const [error, setError] = useState(false);\n    const userType = useSelector(state => state.loginReducer.userType);\n    const loggingIn = useSelector(state => state.loginReducer.loggingIn);\n    const success = useSelector(state => state.loginReducer.success);\n    const failure = useSelector(state => state.loginReducer.error);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleChange = e => {\n        setCreds({...creds, [e.target.name]: e.target.value});\n    };\n\n    const handleSubmit = e => {\n        e.preventDefault();\n\n        dispatch(login(creds))\n        .then(() => {\n            if(!localStorage.getItem('token')) {\n                setError(true);\n                console.log(error);\n            };\n        })\n        .catch(err => console.log(err));\n    };\n\n    useEffect(() => {\n        if(userType) {\n            return userType === 'employee' ?\n                history.push('/e_dashboard') :\n                history.push('/c_dashboard');\n        };\n    }, [userType]);\n\n    return (\n        <div className=\"body\">\n            <LoginNav className=\"navbar\" />\n\n            <div className=\"login-page\">\n                <div className=\"input-box\">\n                    <h2>Log In</h2>\n                    <Form onSubmit={ handleSubmit } className=\"form-field\">\n                        <div className=\"input-field\">\n                            <Label className=\"input-label\" for=\"email\">Email</Label>\n                            <Input\n                                className=\"input\"\n                                type=\"text\"\n                                value={ creds.email }\n                                id=\"email\"\n                                name=\"email\"\n                                onChange={ handleChange }\n                            />\n                        </div>\n                        <div className=\"input-field\">\n                            <Label className=\"input-label\" for=\"password\">Password</Label>\n                            <Input\n                                className=\"input\"\n                                type=\"password\"\n                                value={ creds.password }\n                                name=\"password\"\n                                onChange={ handleChange }\n                            />\n                        </div>\n\n                        <Button type=\"submit\" size=\"lg\" outline color=\"success\" className=\"btn-centered\">Log In</Button>\n                        {loggingIn ? <p className=\"login-status\">...Logging In...</p> :\n                            success ? <p className=\"login-status success\">Login Successful!</p> :\n                            failure ? <p className=\"login-status error\">Login Failed</p> : null}\n                    </Form>\n                </div>\n            </div>\n\n            <Footer />\n        </div>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}