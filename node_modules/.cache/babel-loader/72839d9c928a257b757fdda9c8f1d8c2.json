{"ast":null,"code":"import _defineProperty from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useLocation}from'react-router-dom';import{Card,Button,Modal,ModalHeader,ModalBody,ModalFooter,Form,FormGroup,Label,Input}from'reactstrap';import{getCustomerNotes}from'../../actions/getCustomerNotes';var CustomerPageNotesTab=function CustomerPageNotesTab(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var getNotesFromState=useSelector(function(state){return state.getCustomerNotesReducer.notes;});var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState({note:'',createdAt:'',createdBy:''}),_useState6=_slicedToArray(_useState5,2),note=_useState6[0],setNote=_useState6[1];var dispatch=useDispatch();var location=useLocation();useEffect(function(){var pathArray=location.pathname.split('/');var customerId=pathArray[pathArray.length-1];dispatch(getCustomerNotes(customerId));},[]);useEffect(function(){if(getNotesFromState){setNotes(getNotesFromState);};},[getNotesFromState]);var toggle=function toggle(){if(isOpen){setNote({note:'',createdAt:'',createdBy:''});};setIsOpen(!isOpen);};// const employeeFinder = employeeId => {\n//     employees.forEach(employee => {\n//         if(employee.value === employeeId) {\n//             return employee.label;\n//         };\n//     });\n// };\nvar handleChange=function handleChange(e){setNote(_objectSpread(_objectSpread({},note),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){// Fix the submit handler\ne.preventDefault();console.log(\"Note Submitted\");};return/*#__PURE__*/React.createElement(\"div\",{className:\"customer-page-note-tab\"},notes?notes.notes?notes.notes.map(function(note){return/*#__PURE__*/React.createElement(Card,{className:\"note-card\"},/*#__PURE__*/React.createElement(\"p\",null,note.note),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Created By: \",/*#__PURE__*/React.createElement(\"span\",null,function(note){// Make sure note shows name of creator\nvar name=note.createdBy;console.log(name);})),/*#__PURE__*/React.createElement(\"p\",null,\"Created At: \",note.createdAt),\"  \"));}):null:null,/*#__PURE__*/React.createElement(Button,{outline:true,color:\"success\",onClick:toggle},\"Add Note\"),/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,toggle:toggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggle},\"Add Note\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"note\"},\"Note\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",name:\"note\",onChange:handleChange})))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"success\",onClick:handleSubmit},\"Submit\"))));};export default CustomerPageNotesTab;","map":{"version":3,"sources":["/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/src/components/Employees/CustomerPageNotesTab.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useLocation","Card","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","getCustomerNotes","CustomerPageNotesTab","notes","setNotes","getNotesFromState","state","getCustomerNotesReducer","isOpen","setIsOpen","note","createdAt","createdBy","setNote","dispatch","location","pathArray","pathname","split","customerId","length","toggle","handleChange","e","target","name","value","handleSubmit","preventDefault","console","log","map"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport {\n    Card,\n    Button,\n    Modal,\n    ModalHeader,\n    ModalBody,\n    ModalFooter,\n    Form,\n    FormGroup,\n    Label,\n    Input,\n\n} from 'reactstrap';\nimport { getCustomerNotes } from '../../actions/getCustomerNotes';\n\nconst CustomerPageNotesTab = () => {\n    const [notes, setNotes] = useState([]);\n    const getNotesFromState = useSelector(state => state.getCustomerNotesReducer.notes);\n    const [isOpen, setIsOpen] = useState(false);\n    const [note, setNote] = useState({\n        note: '',\n        createdAt: '',\n        createdBy: ''\n    });\n    const dispatch = useDispatch();\n    const location = useLocation();\n\n    useEffect(() => {\n        const pathArray = location.pathname.split('/');\n        const customerId = pathArray[pathArray.length - 1];\n        dispatch(getCustomerNotes(customerId));\n    }, []);\n\n    useEffect(() => {\n        if(getNotesFromState) {\n            setNotes(getNotesFromState);\n        };\n    }, [getNotesFromState]);\n\n    const toggle = () => {\n        if(isOpen) {\n            setNote({\n                note: '',\n                createdAt: '',\n                createdBy: ''\n            });\n        };\n        setIsOpen(!isOpen);\n    };\n\n    // const employeeFinder = employeeId => {\n    //     employees.forEach(employee => {\n    //         if(employee.value === employeeId) {\n    //             return employee.label;\n    //         };\n    //     });\n    // };\n\n    const handleChange = e => {\n        setNote({\n            ...note,\n            [e.target.name]: e.target.value\n        });\n    };\n\n    const handleSubmit = e => {  // Fix the submit handler\n        e.preventDefault();\n        console.log(\"Note Submitted\");\n    };\n\n    return (\n        <div className=\"customer-page-note-tab\">\n            {notes ? notes.notes ? notes.notes.map(note => (\n                <Card className=\"note-card\">\n                    <p>{note.note}</p>\n                    <div>\n                        <p>Created By: <span>{(note) => {  // Make sure note shows name of creator\n                            const name = note.createdBy;\n                            console.log(name)\n                        }}</span></p>\n                        <p>Created At: {note.createdAt}</p>  {/* Fix time format */}\n                    </div>\n                </Card>\n            )) : null : null}\n            <Button outline color=\"success\" onClick={toggle}>Add Note</Button>\n            <Modal isOpen={isOpen} toggle={toggle}>\n                    <ModalHeader toggle={toggle}>Add Note</ModalHeader>\n                    <ModalBody>\n                        <Form onSubmit={handleSubmit}>\n                            <FormGroup>\n                                <Label for=\"note\">Note</Label>\n                                <Input type=\"textarea\" name=\"note\" onChange={handleChange} />\n                            </FormGroup>\n                        </Form>\n                    </ModalBody>\n                    <ModalFooter>\n                        <Button color=\"success\" onClick={handleSubmit}>Submit</Button>\n                    </ModalFooter>\n                </Modal>\n        </div>\n    );\n};\n\nexport default CustomerPageNotesTab;"]},"metadata":{},"sourceType":"module"}