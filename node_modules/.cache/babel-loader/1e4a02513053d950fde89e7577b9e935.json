{"ast":null,"code":"import _toConsumableArray from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useLocation}from'react-router-dom';import{Table,Button,Modal,ModalHeader,ModalBody,ModalFooter,Form,FormGroup,Label,Input,FormFeedback}from'reactstrap';import{getCustomer}from'../../actions/getCustomer';import{addEmployeeToCustomer}from'../../actions/addEmployeeToCustomer';import'../../styles/employee-dashboard.scss';var CustomerPageEmployeesTab=function CustomerPageEmployeesTab(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),customer=_useState2[0],setCustomer=_useState2[1];var getCustomerFromState=useSelector(function(state){return state.getCustomerReducer.customer;});var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState({firstName:'',lastName:'',jobTitle:'',officeNumber:'',cellNumber:'',email:''}),_useState6=_slicedToArray(_useState5,2),employee=_useState6[0],setEmployee=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),flag=_useState10[0],setFlag=_useState10[1];var dispatch=useDispatch();var location=useLocation();useEffect(function(){var pathArray=location.pathname.split('/');var customerId=pathArray[pathArray.length-1];dispatch(getCustomer(customerId));},[]);useEffect(function(){if(getCustomerFromState){setCustomer(getCustomerFromState);};},[getCustomerFromState]);useEffect(function(){if(flag){setFlag(false);dispatch(addEmployeeToCustomer(customer));toggle();};},[flag]);var toggle=function toggle(){if(isOpen){setEmployee({firstName:'',lastName:'',jobTitle:'',officeNumber:'',cellNumber:'',email:''});setErrors({});};setIsOpen(!isOpen);};var handleChange=function handleChange(e){setEmployee(_objectSpread(_objectSpread({},employee),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var errorsObject={};if(employee.firstName===''){errorsObject.firstName='Must not be empty';};if(employee.lastName===''){errorsObject.lastName='Must not be empty';};if(employee.jobTitle===''){errorsObject.jobTitle='Must not be empty';};if(employee.officeNumber===''&&employee.cellNumber===''){errorsObject.officeNumber='Must not be empty';errorsObject.cellNumber='Must not be empty';}else if(employee.officeNumber!==''&&!employee.officeNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)){errorsObject.officeNumber='Must be a valid phone number';}else if(employee.cellNumber!==''&&!employee.cellNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)){errorsObject.cellNumber='Must be a valid phone number';};if(employee.email===''){errorsObject.email='Must not be empty';}else if(!employee.email.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)){errorsObject.email='Must be a valid email address';};setErrors(errorsObject);if(Object.keys(errorsObject).length===0){if(customer.employees.length===0){setFlag(true);setCustomer(_objectSpread(_objectSpread({},customer),{},{employees:[employee]}));}else{setFlag(true);setCustomer(_objectSpread(_objectSpread({},customer),{},{employees:[].concat(_toConsumableArray(customer.employees),[employee])}));};};};return/*#__PURE__*/React.createElement(\"div\",{className:\"employees-tab\"},/*#__PURE__*/React.createElement(Table,{size:\"sm\",hover:true,className:\"customer-page-employees-table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Job Title\"),/*#__PURE__*/React.createElement(\"th\",null,\"Office Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Cell Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,customer.primaryContact?customer.primaryContact.firstName:null,\" \",customer.primaryContact?customer.primaryContact.lastName:null),/*#__PURE__*/React.createElement(\"td\",null,customer.primaryJobTitle),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(customer.primaryOfficeNumber)},customer.primaryOfficeNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(customer.primaryCellNumber)},customer.primaryCellNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(customer.primaryEmail)},customer.primaryEmail))),customer.billingJobTitle!==''?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,customer.billingContact?customer.billingContact.firstName:null,\" \",customer.billingContact?customer.billingContact.lastName:null),/*#__PURE__*/React.createElement(\"td\",null,customer.billingJobTitle),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(customer.billingOfficeNumber)},customer.billingOfficeNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(customer.billingCellNumber)},customer.billingCellNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(customer.billingEmail)},customer.billingEmail))):null,customer.employees?customer.employees.map(function(employee){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,employee.firstName,\" \",employee.lastName),/*#__PURE__*/React.createElement(\"td\",null,employee.jobTitle),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(employee.officeNumber)},employee.officeNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"tel:+1-\".concat(employee.cellNumber)},employee.cellNumber)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(employee.email)},employee.email)));}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"add-employee-div\"},/*#__PURE__*/React.createElement(Button,{outline:true,color:\"success\",onClick:toggle},\"Add Employee\")),/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,toggle:toggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggle},\"Add Employee\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"add-employee-name-div\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeFirstName\"},\"First Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"firstName\",onChange:handleChange,invalid:errors.firstName?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.firstName)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeLastName\"},\"Last Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"lastName\",onChange:handleChange,invalid:errors.lastName?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.lastName))),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeJobTitle\"},\"Job Title\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"jobTitle\",onChange:handleChange,invalid:errors.jobTitle?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.jobTitle)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeOfficeNumber\"},\"Office Phone Number\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"officeNumber\",placeholder:\"XXX-XXX-XXXX\",onChange:handleChange,invalid:errors.officeNumber?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.officeNumber)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeCellNumber\"},\"Cell Phone Number\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"cellNumber\",placeholder:\"XXX-XXX-XXXX\",onChange:handleChange,invalid:errors.cellNumber?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.cellNumber)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"employeeEmail\"},\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"email\",placeholder:\"example@example.com\",onChange:handleChange,invalid:errors.email?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.email)))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"success\",onClick:handleSubmit},\"Submit\"))));};export default CustomerPageEmployeesTab;","map":{"version":3,"sources":["/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/src/components/Employees/CustomerPageEmployeesTab.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useLocation","Table","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","FormFeedback","getCustomer","addEmployeeToCustomer","CustomerPageEmployeesTab","customer","setCustomer","getCustomerFromState","state","getCustomerReducer","isOpen","setIsOpen","firstName","lastName","jobTitle","officeNumber","cellNumber","email","employee","setEmployee","errors","setErrors","flag","setFlag","dispatch","location","pathArray","pathname","split","customerId","length","toggle","handleChange","e","target","name","value","handleSubmit","preventDefault","errorsObject","match","Object","keys","employees","primaryContact","primaryJobTitle","primaryOfficeNumber","primaryCellNumber","primaryEmail","billingJobTitle","billingContact","billingOfficeNumber","billingCellNumber","billingEmail","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport {\n    Table,\n    Button,\n    Modal,\n    ModalHeader,\n    ModalBody,\n    ModalFooter,\n    Form,\n    FormGroup,\n    Label,\n    Input,\n    FormFeedback\n} from 'reactstrap';\nimport { getCustomer } from '../../actions/getCustomer';\nimport { addEmployeeToCustomer } from '../../actions/addEmployeeToCustomer';\n\nimport '../../styles/employee-dashboard.scss';\n\nconst CustomerPageEmployeesTab = () => {\n    const [customer, setCustomer] = useState({});\n    const getCustomerFromState = useSelector(state => state.getCustomerReducer.customer);\n    const [isOpen, setIsOpen] = useState(false);\n    const [employee, setEmployee] = useState({\n        firstName: '',\n        lastName: '',\n        jobTitle: '',\n        officeNumber: '',\n        cellNumber: '',\n        email: ''\n    });\n    const [errors, setErrors] = useState({});\n    const [flag, setFlag] = useState(false);\n    const dispatch = useDispatch();\n    const location = useLocation();\n\n    useEffect(() => {\n        const pathArray = location.pathname.split('/');\n        const customerId = pathArray[pathArray.length - 1];\n        dispatch(getCustomer(customerId));\n    }, []);\n\n    useEffect(() => {\n        if(getCustomerFromState) {\n            setCustomer(getCustomerFromState);\n        };\n    }, [getCustomerFromState]);\n\n    useEffect(() => {\n        if(flag) {\n            setFlag(false);\n            dispatch(addEmployeeToCustomer(customer));\n            toggle();\n        };\n    }, [flag]);\n\n    const toggle = () => {\n        if(isOpen) {\n            setEmployee({\n                firstName: '',\n                lastName: '',\n                jobTitle: '',\n                officeNumber: '',\n                cellNumber: '',\n                email: ''\n            });\n            setErrors({});\n        };\n        setIsOpen(!isOpen);\n    };\n\n    const handleChange = e => {\n        setEmployee({\n            ...employee,\n            [e.target.name]: e.target.value\n        });\n    };\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        \n        let errorsObject = {};\n\n        if(employee.firstName === '') {\n            errorsObject.firstName = 'Must not be empty';\n        };\n        if(employee.lastName === '') {\n            errorsObject.lastName = 'Must not be empty';\n        };\n        if(employee.jobTitle === '') {\n            errorsObject.jobTitle = 'Must not be empty';\n        };\n        if(employee.officeNumber === '' && employee.cellNumber === '') {\n            errorsObject.officeNumber = 'Must not be empty';\n            errorsObject.cellNumber = 'Must not be empty'\n        } else if(employee.officeNumber !== '' && !employee.officeNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)) {\n            errorsObject.officeNumber = 'Must be a valid phone number';\n        } else if(employee.cellNumber !== '' && !employee.cellNumber.match(/^[0-9]{3}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$/)) {\n            errorsObject.cellNumber = 'Must be a valid phone number';\n        };\n        if(employee.email === '') {\n            errorsObject.email = 'Must not be empty';\n        } else if(!employee.email.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)) {\n            errorsObject.email = 'Must be a valid email address';\n        };\n\n        setErrors(errorsObject);\n\n        if(Object.keys(errorsObject).length === 0) {\n            if(customer.employees.length === 0) {\n                setFlag(true);\n                setCustomer({\n                    ...customer,\n                    employees: [employee]\n                });\n            } else {\n                setFlag(true);\n                setCustomer({\n                    ...customer,\n                    employees: [...customer.employees, employee]\n                });\n            };\n        };\n    };\n\n    return (\n        <div className=\"employees-tab\">\n            <Table size=\"sm\" hover className=\"customer-page-employees-table\">\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Job Title</th>\n                        <th>Office Number</th>\n                        <th>Cell Number</th>\n                        <th>Email</th> \n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>{customer.primaryContact ? customer.primaryContact.firstName : null} {customer.primaryContact ? customer.primaryContact.lastName : null}</td>\n                        <td>{customer.primaryJobTitle}</td>\n                        <td><a href={`tel:+1-${customer.primaryOfficeNumber}`}>{customer.primaryOfficeNumber}</a></td>\n                        <td><a href={`tel:+1-${customer.primaryCellNumber}`}>{customer.primaryCellNumber}</a></td>\n                        <td><a href={`mailto:${customer.primaryEmail}`}>{customer.primaryEmail}</a></td>\n                    </tr>\n                    {customer.billingJobTitle !== '' ?\n                        <tr>\n                            <td>{customer.billingContact ? customer.billingContact.firstName : null} {customer.billingContact ? customer.billingContact.lastName : null}</td>\n                            <td>{customer.billingJobTitle}</td>\n                            <td><a href={`tel:+1-${customer.billingOfficeNumber}`}>{customer.billingOfficeNumber}</a></td>\n                            <td><a href={`tel:+1-${customer.billingCellNumber}`}>{customer.billingCellNumber}</a></td>\n                            <td><a href={`mailto:${customer.billingEmail}`}>{customer.billingEmail}</a></td>\n                        </tr>\n                    : null }\n                    {customer.employees ? customer.employees.map(employee => (\n                        <tr>\n                            <td>{employee.firstName} {employee.lastName}</td>\n                            <td>{employee.jobTitle}</td>\n                            <td><a href={`tel:+1-${employee.officeNumber}`}>{employee.officeNumber}</a></td>\n                            <td><a href={`tel:+1-${employee.cellNumber}`}>{employee.cellNumber}</a></td>\n                            <td><a href={`mailto:${employee.email}`}>{employee.email}</a></td>\n                        </tr>\n                    )) : null}\n                </tbody>\n            </Table>\n            <div className=\"add-employee-div\">\n                <Button outline color=\"success\" onClick={toggle}>Add Employee</Button>\n            </div>\n            <Modal isOpen={isOpen} toggle={toggle}>\n                    <ModalHeader toggle={toggle}>Add Employee</ModalHeader>\n                    <ModalBody>\n                        <Form onSubmit={handleSubmit}>\n                            <div className=\"add-employee-name-div\">\n                                <FormGroup>\n                                    <Label for=\"employeeFirstName\">First Name</Label>\n                                    <Input type=\"text\" name=\"firstName\" onChange={handleChange} invalid={errors.firstName ? true : false} />\n                                    <FormFeedback>{errors.firstName}</FormFeedback>\n                                </FormGroup>\n                                <FormGroup>\n                                    <Label for=\"employeeLastName\">Last Name</Label>\n                                    <Input type=\"text\" name=\"lastName\" onChange={handleChange} invalid={errors.lastName ? true : false} />\n                                    <FormFeedback>{errors.lastName}</FormFeedback>\n                                </FormGroup>\n                            </div>\n                            <FormGroup>\n                                <Label for=\"employeeJobTitle\">Job Title</Label>\n                                <Input type=\"text\" name=\"jobTitle\" onChange={handleChange} invalid={errors.jobTitle ? true : false} />\n                                <FormFeedback>{errors.jobTitle}</FormFeedback>\n                            </FormGroup>\n                            <FormGroup>\n                                <Label for=\"employeeOfficeNumber\">Office Phone Number</Label>\n                                <Input type=\"text\" name=\"officeNumber\" placeholder=\"XXX-XXX-XXXX\" onChange={handleChange} invalid={errors.officeNumber ? true : false} />\n                                <FormFeedback>{errors.officeNumber}</FormFeedback>\n                            </FormGroup>\n                            <FormGroup>\n                                <Label for=\"employeeCellNumber\">Cell Phone Number</Label>\n                                <Input type=\"text\" name=\"cellNumber\" placeholder=\"XXX-XXX-XXXX\" onChange={handleChange} invalid={errors.cellNumber ? true : false} />\n                                <FormFeedback>{errors.cellNumber}</FormFeedback>\n                            </FormGroup>\n                            <FormGroup>\n                                <Label for=\"employeeEmail\">Email</Label>\n                                <Input type=\"text\" name=\"email\" placeholder=\"example@example.com\" onChange={handleChange} invalid={errors.email ? true : false} />\n                                <FormFeedback>{errors.email}</FormFeedback>\n                            </FormGroup>\n                        </Form>\n                    </ModalBody>\n                    <ModalFooter>\n                        <Button color=\"success\" onClick={handleSubmit}>Submit</Button>\n                    </ModalFooter>\n                </Modal>\n        </div>\n    );\n};\n\nexport default CustomerPageEmployeesTab;"]},"metadata":{},"sourceType":"module"}