{"ast":null,"code":"var _jsxFileName = \"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts/src/components/customer-page-components/TaskTab.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport { Table, Card, Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, FormFeedback } from \"reactstrap\";\nimport Select from \"react-select\";\nimport { getUsers } from \"../../actions/getUsers\";\nimport { getCustomerTasks } from \"../../actions/getCustomerTasks\";\nimport { addTask } from \"../../actions/addTask\";\nimport { editTask } from \"../../actions/editTask\";\nimport { deleteTask } from \"../../actions/deleteTask\";\nimport \"../../styles/customer.scss\";\n\nconst TaskTab = () => {\n  const [tasks, setTasks] = useState([]);\n  const getTasksFromState = useSelector(state => state.getCustomerTasksReducer.tasks);\n  const [isOpen, setIsOpen] = useState(false);\n  const [task, setTask] = useState({\n    taskDate: \"\",\n    taskTime: \"\",\n    taskDescription: \"\",\n    customerId: \"\",\n    employeeId: \"\"\n  });\n  const [isOpenEdit, setIsOpenEdit] = useState(false);\n  const [currentTask, setCurrentTask] = useState();\n  const success = useSelector(state => state.addTaskReducer.success);\n  const [errors, setErrors] = useState({});\n  const getErrors = useSelector(state => state.addTaskReducer.errors);\n  const [employees, setEmployees] = useState([]);\n  const employeeArray = [];\n  const getUsersFromState = useSelector(state => state.getUsersReducer.users);\n  const editSuccess = useSelector(state => state.editTaskReducer.success);\n  const deleteSuccess = useSelector(state => state.deleteTaskReducer.success);\n  const dispatch = useDispatch();\n  const location = useLocation();\n  useEffect(() => {\n    const pathArray = location.pathname.split(\"/\");\n    const customerId = pathArray[pathArray.length - 1];\n    dispatch(getCustomerTasks(customerId));\n    dispatch(getUsers());\n    setTask({ ...task,\n      customerId: customerId\n    });\n  }, []);\n  useEffect(() => {\n    if (getTasksFromState) {\n      setTasks(getTasksFromState);\n    }\n  }, [getTasksFromState]);\n  useEffect(() => {\n    if (getUsersFromState.users) {\n      getUsersFromState.users.map(user => {\n        if (user.userType === \"employee\" && user.active === true) {\n          employeeArray.push({\n            label: `${user.firstName} ${user.lastName}`,\n            value: user.userId,\n            name: \"employeeId\",\n            jobTitle: user.jobTitle\n          });\n        }\n      });\n      setEmployees(employeeArray);\n    }\n  }, [getUsersFromState]);\n  useEffect(() => {\n    if (success) {\n      toggle();\n    }\n  }, [success]);\n  useEffect(() => {\n    if (editSuccess || deleteSuccess) {\n      toggleEdit();\n    }\n\n    ;\n  }, [editSuccess, deleteSuccess]);\n  useEffect(() => {\n    if (getErrors) {\n      setErrors(getErrors);\n    }\n  }, [getErrors]);\n\n  const dateConverter = date => {\n    const dateArray = date.split(\"-\");\n    return `${dateArray[1]}/${dateArray[2]}/${dateArray[0]}`;\n  };\n\n  const timeConverter = time => {\n    const timeArray = time.split(\":\");\n    const hour = parseInt(timeArray[0]);\n    let m;\n\n    if (hour <= 11) {\n      m = \"AM\";\n    } else {\n      m = \"PM\";\n    }\n\n    if (hour === 0) {\n      const newHour = \"12\";\n      timeArray[0] = newHour;\n    } else if (hour <= 12) {\n      const newHour = hour.toString();\n      timeArray[0] = newHour;\n    } else {\n      const newHour = (hour - 12).toString();\n      timeArray[0] = newHour;\n    }\n\n    return `${timeArray[0]}:${timeArray[1]} ${m}`;\n  };\n\n  const toggle = () => {\n    if (isOpen) {\n      setTask({ ...task,\n        taskDate: \"\",\n        taskTime: \"\",\n        taskDescription: \"\",\n        employeeId: \"\"\n      });\n      setErrors({});\n    }\n\n    setIsOpen(!isOpen);\n  };\n\n  const toggleEdit = (e, task) => {\n    setCurrentTask(task);\n    setIsOpenEdit(!isOpenEdit);\n  };\n\n  const handleChange = e => {\n    setTask({ ...task,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleEditChange = e => {\n    setCurrentTask({ ...currentTask,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSelectChange = e => {\n    setTask({ ...task,\n      [e.name]: e.value\n    });\n  };\n\n  const handleEditSelectChange = e => {\n    setCurrentTask({ ...currentTask,\n      [e.name]: e.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch(addTask(task));\n  };\n\n  const handleSubmitEdit = (e, currentTask) => {\n    e.preventDefault();\n    dispatch(editTask(currentTask));\n  };\n\n  const handleDeleteTask = (e, currentTask) => {\n    e.preventDefault();\n    dispatch(deleteTask(currentTask.taskId));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"customer-page-task-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    borderless: true,\n    className: \"task-table-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"table-headers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, \"Task\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \"Time\")))), tasks ? tasks.tasks ? tasks.tasks.map(task => /*#__PURE__*/React.createElement(Card, {\n    className: \"task-card\",\n    onClick: e => toggleEdit(e, task),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    borderless: true,\n    className: \"task-card-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 23\n    }\n  }, task.taskDescription), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 23\n    }\n  }, dateConverter(task.taskDate)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 23\n    }\n  }, timeConverter(task.taskTime))))))) : null : null, /*#__PURE__*/React.createElement(Button, {\n    outline: true,\n    color: \"success\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, \"Add Task\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isOpen,\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, \"Add Task\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-task-date-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"taskDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"date\",\n    name: \"taskDate\",\n    placeholder: \"date placeholder\",\n    onChange: handleChange,\n    invalid: errors.taskDate ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, errors.taskDate)), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"taskTime\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, \"Time\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"time\",\n    name: \"taskTime\",\n    placeholder: \"time placeholder\",\n    onChange: handleChange,\n    invalid: errors.taskTime ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 17\n    }\n  }, errors.taskTime))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"taskDescription\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 15\n    }\n  }, \"Task Description\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    name: \"taskDescription\",\n    onChange: handleChange,\n    invalid: errors.taskDescription ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 15\n    }\n  }, errors.taskDescription)), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"employeeId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, \"Assigned To\"), /*#__PURE__*/React.createElement(Select, {\n    name: \"employeeId\",\n    options: employees,\n    onChange: handleSelectChange,\n    className: errors.employeeId ? \"invalid\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    type: \"hidden\",\n    disabled: true,\n    invalid: errors.employeeId ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  }, errors.employeeId)))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, \"Submit\"))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isOpenEdit,\n    toggle: toggleEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggleEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }\n  }, \"Edit Task\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmitEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-task-date-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"taskDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"date\",\n    name: \"taskDate\",\n    placeholder: \"date placeholder\",\n    value: currentTask ? currentTask.taskDate : null,\n    onChange: handleEditChange,\n    invalid: errors.taskDate ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 17\n    }\n  }, errors.taskDate)), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"taskTime\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 17\n    }\n  }, \"Time\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"time\",\n    name: \"taskTime\",\n    placeholder: \"time placeholder\",\n    value: currentTask ? currentTask.taskTime : null,\n    onChange: handleEditChange,\n    invalid: errors.taskTime ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  }, errors.taskTime))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"taskDescription\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 15\n    }\n  }, \"Task Description\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    name: \"taskDescription\",\n    value: currentTask ? currentTask.taskDescription : null,\n    onChange: handleEditChange,\n    invalid: errors.taskDescription ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 15\n    }\n  }, errors.taskDescription)), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"employeeId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 15\n    }\n  }, \"Assigned To\"), /*#__PURE__*/React.createElement(Select, {\n    name: \"employeeId\",\n    options: employees,\n    onChange: handleEditSelectChange,\n    defaultValue: currentTask ? {\n      value: currentTask.employeeId\n    } : null,\n    className: errors.employeeId ? \"invalid\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    type: \"hidden\",\n    disabled: true,\n    invalid: errors.employeeId ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormFeedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 15\n    }\n  }, errors.employeeId)))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"danger\",\n    onClick: e => handleSubmitEdit(e, currentTask),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 11\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    onClick: e => handleDeleteTask(e, currentTask),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 11\n    }\n  }, \"Complete\"))));\n};\n\nexport default TaskTab;","map":{"version":3,"sources":["/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts/src/components/customer-page-components/TaskTab.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useLocation","Table","Card","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","FormFeedback","Select","getUsers","getCustomerTasks","addTask","editTask","deleteTask","TaskTab","tasks","setTasks","getTasksFromState","state","getCustomerTasksReducer","isOpen","setIsOpen","task","setTask","taskDate","taskTime","taskDescription","customerId","employeeId","isOpenEdit","setIsOpenEdit","currentTask","setCurrentTask","success","addTaskReducer","errors","setErrors","getErrors","employees","setEmployees","employeeArray","getUsersFromState","getUsersReducer","users","editSuccess","editTaskReducer","deleteSuccess","deleteTaskReducer","dispatch","location","pathArray","pathname","split","length","map","user","userType","active","push","label","firstName","lastName","value","userId","name","jobTitle","toggle","toggleEdit","dateConverter","date","dateArray","timeConverter","time","timeArray","hour","parseInt","m","newHour","toString","e","handleChange","target","handleEditChange","handleSelectChange","handleEditSelectChange","handleSubmit","preventDefault","handleSubmitEdit","handleDeleteTask","taskId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport {\n  Table,\n  Card,\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  FormFeedback,\n} from \"reactstrap\";\nimport Select from \"react-select\";\nimport { getUsers } from \"../../actions/getUsers\";\nimport { getCustomerTasks } from \"../../actions/getCustomerTasks\";\nimport { addTask } from \"../../actions/addTask\";\nimport { editTask } from \"../../actions/editTask\";\nimport { deleteTask } from \"../../actions/deleteTask\";\n\nimport \"../../styles/customer.scss\";\n\nconst TaskTab = () => {\n  const [tasks, setTasks] = useState([]);\n  const getTasksFromState = useSelector(\n    (state) => state.getCustomerTasksReducer.tasks\n  );\n  const [isOpen, setIsOpen] = useState(false);\n  const [task, setTask] = useState({\n    taskDate: \"\",\n    taskTime: \"\",\n    taskDescription: \"\",\n    customerId: \"\",\n    employeeId: \"\",\n  });\n  const [isOpenEdit, setIsOpenEdit] = useState(false);\n  const [currentTask, setCurrentTask] = useState()\n  const success = useSelector((state) => state.addTaskReducer.success);\n  const [errors, setErrors] = useState({});\n  const getErrors = useSelector((state) => state.addTaskReducer.errors);\n  const [employees, setEmployees] = useState([]);\n  const employeeArray = [];\n  const getUsersFromState = useSelector((state) => state.getUsersReducer.users);\n  const editSuccess = useSelector(state => state.editTaskReducer.success);\n  const deleteSuccess = useSelector(state => state.deleteTaskReducer.success);\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  useEffect(() => {\n    const pathArray = location.pathname.split(\"/\");\n    const customerId = pathArray[pathArray.length - 1];\n    dispatch(getCustomerTasks(customerId));\n    dispatch(getUsers());\n    setTask({\n      ...task,\n      customerId: customerId\n    })\n  }, []);\n\n  useEffect(() => {\n    if (getTasksFromState) {\n      setTasks(getTasksFromState);\n    }\n  }, [getTasksFromState]);\n\n  useEffect(() => {\n    if (getUsersFromState.users) {\n      getUsersFromState.users.map((user) => {\n        if (user.userType === \"employee\" && user.active === true) {\n          employeeArray.push({\n            label: `${user.firstName} ${user.lastName}`,\n            value: user.userId,\n            name: \"employeeId\",\n            jobTitle: user.jobTitle,\n          });\n        }\n      });\n\n      setEmployees(employeeArray);\n    }\n  }, [getUsersFromState]);\n\n  useEffect(() => {\n    if (success) {\n      toggle();\n    }\n  }, [success]);\n\n  useEffect(() => {\n    if (editSuccess || deleteSuccess) {\n      toggleEdit();\n    };\n  }, [editSuccess, deleteSuccess]);\n\n  useEffect(() => {\n    if (getErrors) {\n      setErrors(getErrors);\n    }\n  }, [getErrors]);\n\n  const dateConverter = (date) => {\n    const dateArray = date.split(\"-\");\n    return `${dateArray[1]}/${dateArray[2]}/${dateArray[0]}`;\n  };\n\n  const timeConverter = (time) => {\n    const timeArray = time.split(\":\");\n    const hour = parseInt(timeArray[0]);\n    let m;\n\n    if (hour <= 11) {\n      m = \"AM\";\n    } else {\n      m = \"PM\";\n    }\n\n    if (hour === 0) {\n      const newHour = \"12\";\n      timeArray[0] = newHour;\n    } else if (hour <= 12) {\n      const newHour = hour.toString();\n      timeArray[0] = newHour;\n    } else {\n      const newHour = (hour - 12).toString();\n      timeArray[0] = newHour;\n    }\n\n    return `${timeArray[0]}:${timeArray[1]} ${m}`;\n  };\n\n  const toggle = () => {\n    if (isOpen) {\n      setTask({\n        ...task,\n        taskDate: \"\",\n        taskTime: \"\",\n        taskDescription: \"\",\n        employeeId: \"\",\n      });\n      setErrors({});\n    }\n    setIsOpen(!isOpen);\n  };\n\n  const toggleEdit = (e, task) => {\n    setCurrentTask(task);\n    setIsOpenEdit(!isOpenEdit);\n  };\n\n  const handleChange = (e) => {\n    setTask({\n      ...task,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleEditChange = (e) => {\n    setCurrentTask({\n      ...currentTask,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSelectChange = (e) => {\n    setTask({\n      ...task,\n      [e.name]: e.value,\n    });\n  };\n\n  const handleEditSelectChange = (e) => {\n    setCurrentTask({\n      ...currentTask,\n      [e.name]: e.value,\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    dispatch(addTask(task));\n  };\n\n  const handleSubmitEdit = (e, currentTask) => {\n    e.preventDefault();\n    dispatch(editTask(currentTask));\n  };\n\n  const handleDeleteTask = (e, currentTask) => {\n    e.preventDefault();\n    dispatch(deleteTask(currentTask.taskId))\n  };\n\n  return (\n    <div className=\"customer-page-task-tab\">\n      <Table borderless className=\"task-table-header\">\n        <thead>\n          <tr className=\"table-headers\">\n            <th>Task</th>\n            <th>Date</th>\n            <th>Time</th>\n          </tr>\n        </thead>\n      </Table>\n      {tasks\n        ? tasks.tasks\n          ? tasks.tasks.map((task) => (\n              <Card className=\"task-card\" onClick={(e) => toggleEdit(e, task)}>\n                <Table borderless className=\"task-card-table\">\n                  <tbody>\n                    <tr className=\"table-data\">\n                      <td>{task.taskDescription}</td>\n                      <td>{dateConverter(task.taskDate)}</td>\n                      <td>{timeConverter(task.taskTime)}</td>\n                    </tr>\n                  </tbody>\n                </Table>\n              </Card>\n            ))\n          : null\n        : null}\n      <Button outline color=\"success\" onClick={toggle}>\n        Add Task\n      </Button>\n      <Modal isOpen={isOpen} toggle={toggle}>\n        <ModalHeader toggle={toggle}>Add Task</ModalHeader>\n        <ModalBody>\n          <Form onSubmit={handleSubmit}>\n            <div className=\"add-task-date-div\">\n              <FormGroup>\n                <Label for=\"taskDate\">Date</Label>\n                <Input\n                  type=\"date\"\n                  name=\"taskDate\"\n                  placeholder=\"date placeholder\"\n                  onChange={handleChange}\n                  invalid={errors.taskDate ? true : false}\n                />\n                <FormFeedback>{errors.taskDate}</FormFeedback>\n              </FormGroup>\n              <FormGroup>\n                <Label for=\"taskTime\">Time</Label>\n                <Input\n                  type=\"time\"\n                  name=\"taskTime\"\n                  placeholder=\"time placeholder\"\n                  onChange={handleChange}\n                  invalid={errors.taskTime ? true : false}\n                />\n                <FormFeedback>{errors.taskTime}</FormFeedback>\n              </FormGroup>\n            </div>\n            <FormGroup>\n              <Label for=\"taskDescription\">Task Description</Label>\n              <Input\n                type=\"textarea\"\n                name=\"taskDescription\"\n                onChange={handleChange}\n                invalid={errors.taskDescription ? true : false}\n              />\n              <FormFeedback>{errors.taskDescription}</FormFeedback>\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"employeeId\">Assigned To</Label>\n              <Select\n                name=\"employeeId\"\n                options={employees}\n                onChange={handleSelectChange}\n                className={errors.employeeId ? \"invalid\" : \"\"}\n              />\n              <Input\n                type=\"hidden\"\n                disabled\n                invalid={errors.employeeId ? true : false}\n              />\n              <FormFeedback>{errors.employeeId}</FormFeedback>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"success\" onClick={handleSubmit}>\n            Submit\n          </Button>\n        </ModalFooter>\n      </Modal>\n      <Modal isOpen={isOpenEdit} toggle={toggleEdit}>\n        <ModalHeader toggle={toggleEdit}>Edit Task</ModalHeader>\n        <ModalBody>\n          <Form onSubmit={handleSubmitEdit}>\n            <div className=\"add-task-date-div\">\n              <FormGroup>\n                <Label for=\"taskDate\">Date</Label>\n                <Input\n                  type=\"date\"\n                  name=\"taskDate\"\n                  placeholder=\"date placeholder\"\n                  value={currentTask ? currentTask.taskDate : null}\n                  onChange={handleEditChange}\n                  invalid={errors.taskDate ? true : false}\n                />\n                <FormFeedback>{errors.taskDate}</FormFeedback>\n              </FormGroup>\n              <FormGroup>\n                <Label for=\"taskTime\">Time</Label>\n                <Input\n                  type=\"time\"\n                  name=\"taskTime\"\n                  placeholder=\"time placeholder\"\n                  value={currentTask ? currentTask.taskTime : null}\n                  onChange={handleEditChange}\n                  invalid={errors.taskTime ? true : false}\n                />\n                <FormFeedback>{errors.taskTime}</FormFeedback>\n              </FormGroup>\n            </div>\n            <FormGroup>\n              <Label for=\"taskDescription\">Task Description</Label>\n              <Input\n                type=\"textarea\"\n                name=\"taskDescription\"\n                value={currentTask ? currentTask.taskDescription : null}\n                onChange={handleEditChange}\n                invalid={errors.taskDescription ? true : false}\n              />\n              <FormFeedback>{errors.taskDescription}</FormFeedback>\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"employeeId\">Assigned To</Label>\n              <Select\n                name=\"employeeId\"\n                options={employees}\n                onChange={handleEditSelectChange}\n                defaultValue={\n                  currentTask ? { value: currentTask.employeeId } : null\n                }\n                className={errors.employeeId ? \"invalid\" : \"\"}\n              />\n              <Input\n                type=\"hidden\"\n                disabled\n                invalid={errors.employeeId ? true : false}\n              />\n              <FormFeedback>{errors.employeeId}</FormFeedback>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"danger\" onClick={(e) => handleSubmitEdit(e, currentTask)}>\n            Edit\n          </Button>\n          <Button color=\"success\" onClick={(e) => handleDeleteTask(e, currentTask)}>\n            Complete\n          </Button>\n        </ModalFooter>\n      </Modal>\n    </div>\n  );\n};\n\nexport default TaskTab;\n"]},"metadata":{},"sourceType":"module"}