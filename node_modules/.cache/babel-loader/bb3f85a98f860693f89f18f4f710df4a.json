{"ast":null,"code":"import _defineProperty from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Form,FormGroup,Label,Input,FormFeedback}from'reactstrap';import Select from'react-select';import{useLocation}from'react-router-dom';import{addTask}from'../../actions/addTask';import{getUsers}from'../../actions/getUsers';import'../../styles/sidebar.scss';var AddTaskBtn=function AddTaskBtn(){var _useState=useState({taskDescription:'',taskDate:'',taskTime:'',employeeId:''}),_useState2=_slicedToArray(_useState,2),task=_useState2[0],setTask=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),hidden=_useState4[0],setHidden=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOpen=_useState6[0],setIsOpen=_useState6[1];var employeeArray=[];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),employees=_useState8[0],setEmployees=_useState8[1];var getEmployees=useSelector(function(state){return state.getUsersReducer.users;});var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];var getErrors=useSelector(function(state){return state.addTaskReducer.errors;});var success=useSelector(function(state){return state.addTaskReducer.success;});var location=useLocation();var dispatch=useDispatch();useEffect(function(){dispatch(getUsers());},[]);useEffect(function(){changeHidden(location);},[location]);useEffect(function(){if(getEmployees.users){getEmployees.users.map(function(user){if(user.userType==='employee'&&user.active===true){employeeArray.push({label:\"\".concat(user.firstName,\" \").concat(user.lastName),value:user.userId,name:'employeeId',jobTitle:user.jobTitle});};});setEmployees(employeeArray);};},[getEmployees]);useEffect(function(){if(getErrors){setErrors(getErrors);};},[getErrors]);useEffect(function(){if(success){toggle();};},[success]);var changeHidden=function changeHidden(location){if(location.pathname==='/e_dashboard'||location.pathname==='/e_dashboard/'){setHidden(true);}else{setHidden(false);};};var toggle=function toggle(){if(isOpen){setTask({taskDescription:'',taskDate:'',taskTime:'',employeeId:''});}setIsOpen(!isOpen);};var handleChange=function handleChange(e){setTask(_objectSpread(_objectSpread({},task),{},_defineProperty({},e.target.name,e.target.value)));};var handleSelectChange=function handleSelectChange(e){setTask(_objectSpread(_objectSpread({},task),{},_defineProperty({},e.name,e.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(addTask(task));};return/*#__PURE__*/React.createElement(\"div\",{className:\"add-task-div\"},hidden?/*#__PURE__*/React.createElement(Button,{color:\"success\",onClick:toggle},\"Add Task\"):null,/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,toggle:toggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggle},\"Add Task\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Task\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",name:\"taskDescription\",onChange:handleChange,invalid:errors.taskDescription?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.taskDescription)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Date\"),/*#__PURE__*/React.createElement(Input,{type:\"date\",placeholder:\"date placeholder\",name:\"taskDate\",onChange:handleChange,invalid:errors.taskDate?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.taskDate)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Time\"),/*#__PURE__*/React.createElement(Input,{type:\"time\",placeholder:\"time placeholder\",name:\"taskTime\",onChange:handleChange,invalid:errors.taskTime?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.taskTime))),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Assigned To\"),/*#__PURE__*/React.createElement(Select,{options:employees,onChange:handleSelectChange,className:errors.employeeId?'invalid':''}),/*#__PURE__*/React.createElement(Input,{type:\"hidden\",disabled:true,invalid:errors.employeeId?true:false}),/*#__PURE__*/React.createElement(FormFeedback,null,errors.employeeId)))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"success\",onClick:handleSubmit},\"Submit\"))));};export default AddTaskBtn;","map":{"version":3,"sources":["/Users/coryhale/Documents/rocky-mountain-lifts/rocky_mountain_lifts_crm/rml_crm/src/components/Employees/AddTaskBtn.js"],"names":["React","useState","useEffect","useDispatch","useSelector","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","FormFeedback","Select","useLocation","addTask","getUsers","AddTaskBtn","taskDescription","taskDate","taskTime","employeeId","task","setTask","hidden","setHidden","isOpen","setIsOpen","employeeArray","employees","setEmployees","getEmployees","state","getUsersReducer","users","errors","setErrors","getErrors","addTaskReducer","success","location","dispatch","changeHidden","map","user","userType","active","push","label","firstName","lastName","value","userId","name","jobTitle","toggle","pathname","handleChange","e","target","handleSelectChange","handleSubmit","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n    Button,\n    Modal,\n    ModalHeader,\n    ModalBody,\n    ModalFooter,\n    Form,\n    FormGroup,\n    Label,\n    Input,\n    FormFeedback\n} from 'reactstrap';\nimport Select from 'react-select';\nimport { useLocation } from 'react-router-dom';\nimport { addTask } from '../../actions/addTask';\nimport { getUsers } from '../../actions/getUsers';\n\nimport '../../styles/sidebar.scss';\n\nconst AddTaskBtn = () => {\n    const [task, setTask] = useState({\n        taskDescription: '',\n        taskDate: '',\n        taskTime: '',\n        employeeId: ''\n    });\n    \n    const [hidden, setHidden] = useState(false);\n    const [isOpen, setIsOpen] = useState(false);\n    const employeeArray = [];\n    const [employees, setEmployees] = useState([]);\n    const getEmployees = useSelector(state => state.getUsersReducer.users);\n    const [errors, setErrors] = useState({});\n    const getErrors = useSelector(state => state.addTaskReducer.errors);\n    const success = useSelector(state => state.addTaskReducer.success);\n    const location = useLocation();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(getUsers());\n    }, []);\n\n    useEffect(() => {\n        changeHidden(location);\n    }, [location]);\n\n    useEffect(() => {\n        if(getEmployees.users) {\n            getEmployees.users.map(user => {\n                if(user.userType === 'employee' && user.active === true) {\n                    employeeArray.push({\n                        label: `${user.firstName} ${user.lastName}`,\n                        value: user.userId,\n                        name: 'employeeId',\n                        jobTitle: user.jobTitle\n                    });\n                };\n            });\n\n            setEmployees(employeeArray);\n        };\n    }, [getEmployees]);\n\n    useEffect(() => {\n        if(getErrors) {\n            setErrors(getErrors);\n        };\n    }, [getErrors]);\n\n    useEffect(() => {\n        if(success) {\n            toggle()\n        };\n    }, [success]);\n    \n    const changeHidden = location => {\n        if(location.pathname === '/e_dashboard' || location.pathname === '/e_dashboard/') {\n            setHidden(true);\n        } else {\n            setHidden(false);\n        };\n    };\n\n    const toggle = () => {\n        if(isOpen) {\n            setTask({\n                taskDescription: '',\n                taskDate: '',\n                taskTime: '',\n                employeeId: ''\n            });\n        }\n        setIsOpen(!isOpen);\n    };\n\n    const handleChange = e => {\n        setTask({\n            ...task,\n            [e.target.name]: e.target.value\n        });\n    };\n\n    const handleSelectChange = e => {\n        setTask({\n            ...task,\n            [e.name]: e.value\n        });\n    };\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        dispatch(addTask(task));\n    };\n\n    return (\n        <div className=\"add-task-div\">\n            {hidden ? <Button color=\"success\" onClick={toggle}>Add Task</Button> : null}\n            <Modal isOpen={isOpen} toggle={toggle}>\n                <ModalHeader toggle={toggle}>Add Task</ModalHeader>\n                <ModalBody>\n                    <Form onSubmit={handleSubmit}>\n                        <FormGroup>\n                            <Label>Task</Label>\n                            <Input type=\"textarea\" name=\"taskDescription\" onChange={handleChange} invalid={errors.taskDescription ? true : false} />\n                            <FormFeedback>{errors.taskDescription}</FormFeedback>\n                        </FormGroup>\n                        <div>\n                            <FormGroup>\n                                <Label>Date</Label>\n                                <Input type=\"date\" placeholder=\"date placeholder\" name=\"taskDate\" onChange={handleChange} invalid={errors.taskDate ? true : false} />\n                                <FormFeedback>{errors.taskDate}</FormFeedback>\n                            </FormGroup>\n                            <FormGroup>\n                                <Label>Time</Label>\n                                <Input type=\"time\" placeholder=\"time placeholder\" name=\"taskTime\" onChange={handleChange} invalid={errors.taskTime ? true : false} />\n                                <FormFeedback>{errors.taskTime}</FormFeedback>\n                            </FormGroup>\n                        </div>\n                        <FormGroup>\n                            <Label>Assigned To</Label>\n                            <Select options={employees} onChange={handleSelectChange} className={errors.employeeId ? 'invalid' : ''} />\n                            <Input type=\"hidden\" disabled invalid={errors.employeeId ? true : false} />\n                            <FormFeedback>{errors.employeeId}</FormFeedback>\n                        </FormGroup>\n                    </Form>\n                </ModalBody>\n                <ModalFooter>\n                    <Button color=\"success\" onClick={handleSubmit}>Submit</Button>\n                </ModalFooter>\n            </Modal>\n        </div>\n    );\n};\n\nexport default AddTaskBtn;"]},"metadata":{},"sourceType":"module"}