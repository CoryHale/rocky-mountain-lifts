{"ast":null,"code":"import _regeneratorRuntime from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useAuth}from\"../../contexts/AuthContext\";import{Dropdown,DropdownItem,DropdownMenu,DropdownToggle,Nav,Navbar,NavbarBrand,NavItem,NavLink}from\"reactstrap\";import{NavLink as RRNavLink,useHistory}from\"react-router-dom\";import Logo from\"../../assets/logo.png\";import\"../../styles/header.scss\";var Header=function Header(){var user=useSelector(function(state){return state.getCurrentUserReducer.currentUser;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpenNotifications=_useState4[0],setIsOpenNotifications=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useAuth=useAuth(),logout=_useAuth.logout;var history=useHistory();useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return user;case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);setError(\"Could not get current user\");case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser();},[]);var toggle=function toggle(){setIsOpen(!isOpen);};var toggleNotifications=function toggleNotifications(){setIsOpenNotifications(!isOpenNotifications);};var handleLogout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setError(\"\");_context2.prev=1;_context2.next=4;return logout();case 4:localStorage.clear();history.push(\"/\");_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);setError(\"Failed to log out\");case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleLogout(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(Navbar,{expand:\"md\"},/*#__PURE__*/React.createElement(NavbarBrand,{href:\"/\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:Logo,alt:\"rocky mountain lifts\"})),/*#__PURE__*/React.createElement(Nav,{className:\"ml-auto\",navbar:true},user.userType===\"employee\"?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard\",exact:true},\"Tasks\")):null,user.userType===\"employee\"?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard/workorders\"},\"Work Orders\")):null,user.userType===\"employee\"?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard/jobs\"},\"Jobs\")):null,user.userType===\"employee\"?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard/customers\"},\"Customers\")):null,user.userType===\"employee\"?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard/files\"},\"Files\")):null,user.userType===\"employee\"&&user.tierLevel===3?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard/employees\"},\"Employees\")):null,user.userType===\"customer\"?/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{tag:RRNavLink,className:\"nav-link\",activeClassName:\"active\",to:\"/dashboard/test\"},\"Test\")):null,/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(\"div\",{className:\"divider\"})),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(Dropdown,{isOpen:isOpenNotifications,toggle:toggleNotifications},/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"span\",className:\"nav-link\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-bell\"})),/*#__PURE__*/React.createElement(DropdownMenu,{direction:\"center\"},/*#__PURE__*/React.createElement(DropdownItem,null,\"Notification\")))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(Dropdown,{isOpen:isOpen,toggle:toggle},/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"span\",className:\"nav-link\"},user.userType===\"employee\"?/*#__PURE__*/React.createElement(\"span\",null,user.firstName,\" \",user.lastName):/*#__PURE__*/React.createElement(\"span\",null,user.primaryContact?user.primaryContact.firstName:null,\" \",user.primaryContact?user.primaryContact.lastName:null)),/*#__PURE__*/React.createElement(DropdownMenu,{direction:\"right\"},/*#__PURE__*/React.createElement(DropdownItem,null,\"My Profile\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:handleLogout},\"Logout\")))))));};export default Header;","map":{"version":3,"sources":["/Users/coryhale/Documents/Rocky Mountain Lifts/rocky-mountain-lifts copy/src/components/dashboard-components/Header.js"],"names":["React","useEffect","useState","useSelector","useAuth","Dropdown","DropdownItem","DropdownMenu","DropdownToggle","Nav","Navbar","NavbarBrand","NavItem","NavLink","RRNavLink","useHistory","Logo","Header","user","state","getCurrentUserReducer","currentUser","isOpen","setIsOpen","isOpenNotifications","setIsOpenNotifications","error","setError","logout","history","fetchUser","toggle","toggleNotifications","handleLogout","localStorage","clear","push","userType","tierLevel","firstName","lastName","primaryContact"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport {\n  Dropdown,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  Nav,\n  Navbar,\n  NavbarBrand,\n  NavItem,\n  NavLink,\n} from \"reactstrap\";\nimport { NavLink as RRNavLink, useHistory } from \"react-router-dom\";\n\nimport Logo from \"../../assets/logo.png\";\nimport \"../../styles/header.scss\";\n\nconst Header = () => {\n  const user = useSelector((state) => state.getCurrentUserReducer.currentUser);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenNotifications, setIsOpenNotifications] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { logout } = useAuth();\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        await user;\n      } catch {\n        setError(\"Could not get current user\");\n      }\n    };\n\n    fetchUser();\n  }, []);\n\n  const toggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const toggleNotifications = () => {\n    setIsOpenNotifications(!isOpenNotifications);\n  };\n\n  const handleLogout = async () => {\n    setError(\"\");\n\n    try {\n      await logout();\n      localStorage.clear();\n      history.push(\"/\");\n    } catch {\n      setError(\"Failed to log out\");\n    }\n  };\n\n  return (\n    <div className=\"header\">\n      <Navbar expand=\"md\">\n        <NavbarBrand href=\"/\">\n          <img className=\"logo\" src={Logo} alt=\"rocky mountain lifts\" />\n        </NavbarBrand>\n        <Nav className=\"ml-auto\" navbar>\n          {user.userType === \"employee\" ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard\"\n                exact\n              >\n                Tasks\n              </NavLink>\n            </NavItem>\n          ) : null}\n          {user.userType === \"employee\" ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard/workorders\"\n              >\n                Work Orders\n              </NavLink>\n            </NavItem>\n          ) : null}\n          {user.userType === \"employee\" ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard/jobs\"\n              >\n                Jobs\n              </NavLink>\n            </NavItem>\n          ) : null}\n          {user.userType === \"employee\" ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard/customers\"\n              >\n                Customers\n              </NavLink>\n            </NavItem>\n          ) : null}\n          {user.userType === \"employee\" ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard/files\"\n              >\n                Files\n              </NavLink>\n            </NavItem>\n          ) : null}\n          {user.userType === \"employee\" && user.tierLevel === 3 ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard/employees\"\n              >\n                Employees\n              </NavLink>\n            </NavItem>\n          ) : null}\n          {user.userType === \"customer\" ? (\n            <NavItem>\n              <NavLink\n                tag={RRNavLink}\n                className=\"nav-link\"\n                activeClassName=\"active\"\n                to=\"/dashboard/test\"\n              >\n                Test\n              </NavLink>\n            </NavItem>\n          ) : null}\n          <NavItem>\n            <div className=\"divider\" />\n          </NavItem>\n          <NavItem>\n            <Dropdown isOpen={isOpenNotifications} toggle={toggleNotifications}>\n              <DropdownToggle tag=\"span\" className=\"nav-link\">\n                <i className=\"fas fa-bell\" />\n              </DropdownToggle>\n              <DropdownMenu direction=\"center\">\n                <DropdownItem>Notification</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          </NavItem>\n          <NavItem>\n            <Dropdown isOpen={isOpen} toggle={toggle}>\n              <DropdownToggle tag=\"span\" className=\"nav-link\">\n                {user.userType === \"employee\" ? (\n                  <span>\n                    {user.firstName} {user.lastName}\n                  </span>\n                ) : (\n                  <span>\n                    {user.primaryContact ? user.primaryContact.firstName : null}{\" \"}\n                    {user.primaryContact ? user.primaryContact.lastName : null}\n                  </span>\n                )}\n              </DropdownToggle>\n              <DropdownMenu direction=\"right\">\n                <DropdownItem>My Profile</DropdownItem>\n                <DropdownItem onClick={handleLogout}>Logout</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          </NavItem>\n        </Nav>\n      </Navbar>\n    </div>\n  );\n};\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}